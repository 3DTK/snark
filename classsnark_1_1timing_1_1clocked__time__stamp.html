<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>snark: clocked_time_stamp Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">snark
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesnark.html">snark</a></li><li class="navelem"><b>timing</b></li><li class="navelem"><a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html">clocked_time_stamp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsnark_1_1timing_1_1clocked__time__stamp-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">clocked_time_stamp Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="clocked__time__stamp_8h_source.html">clocked_time_stamp.h</a>&gt;</code></p>

<p>Inherits noncopyable.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f8829ea26e3b1aa2310e31f2acaa0f3"><td class="memItemLeft" align="right" valign="top">boost::posix_time::ptime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#a2f8829ea26e3b1aa2310e31f2acaa0f3">adjusted</a> (const boost::posix_time::ptime &amp;t, std::size_t ticks=1)</td></tr>
<tr class="memitem:a0ff68fee8e88441149a842563cd6fac1"><td class="memItemLeft" align="right" valign="top">boost::posix_time::ptime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#a0ff68fee8e88441149a842563cd6fac1">adjusted</a> (const boost::posix_time::ptime &amp;t, boost::posix_time::time_duration <a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#a08b5c726eab18ce74c5e736f213edfa9">period</a>, std::size_t ticks=1)</td></tr>
<tr class="memitem:af1389e34b7fb712ef57705083d314224"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1389e34b7fb712ef57705083d314224"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#af1389e34b7fb712ef57705083d314224">clocked_time_stamp</a> (boost::posix_time::time_duration <a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#a08b5c726eab18ce74c5e736f213edfa9">period</a>)</td></tr>
<tr class="memdesc:af1389e34b7fb712ef57705083d314224"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor, takes event period <br/></td></tr>
<tr class="memitem:a08b5c726eab18ce74c5e736f213edfa9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08b5c726eab18ce74c5e736f213edfa9"></a>
boost::posix_time::time_duration&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#a08b5c726eab18ce74c5e736f213edfa9">period</a> () const </td></tr>
<tr class="memdesc:a08b5c726eab18ce74c5e736f213edfa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">return current period <br/></td></tr>
<tr class="memitem:ad20897c5c8bd47f5d4005989bead0e55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad20897c5c8bd47f5d4005989bead0e55"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr class="memdesc:ad20897c5c8bd47f5d4005989bead0e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset the approximation <br/></td></tr>
<tr class="memitem:aec8728a39ab5857105d8190fb276114b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec8728a39ab5857105d8190fb276114b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnark_1_1timing_1_1clocked__time__stamp.html#aec8728a39ab5857105d8190fb276114b">~clocked_time_stamp</a> ()</td></tr>
<tr class="memdesc:aec8728a39ab5857105d8190fb276114b"><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor <br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Helps calculate a better approximation for the timestamp that happens with a very frequency (e.g. laser firing).</p>
<p>The first few timestamps may be inaccurate, but eventually (quite fast, if the system is not under heavy load) the adjusted timestamp will converge to the true time of event plus a constant system latency (e.g. time to receive a data packet through a certain bandwidth).</p>
<p>Assumptions:</p>
<ul>
<li>The event frequency is stable enough, e.g. it's a bus clock</li>
<li>Minimum system latency is reasonably stable</li>
<li>System performance is enough to catch up at least once in a while </li>
</ul>
</div><h2>Member Function Documentation</h2>
<a class="anchor" id="a2f8829ea26e3b1aa2310e31f2acaa0f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::posix_time::ptime adjusted </td>
          <td>(</td>
          <td class="paramtype">const boost::posix_time::ptime &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>ticks</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>take event reception timestamp and return adjusted timestamp; ticks are the number of clock cycles between this event and the previous one </p>

</div>
</div>
<a class="anchor" id="a0ff68fee8e88441149a842563cd6fac1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::posix_time::ptime adjusted </td>
          <td>(</td>
          <td class="paramtype">const boost::posix_time::ptime &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::posix_time::time_duration&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>ticks</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>take event reception timestamp and return adjusted timestamp, using new value for the period; ticks are the number of clock cycles between this event and the previous one </p>
<dl class="section note"><dt>Note</dt><dd>: this method accounts for small slow variations of the period over long time, for example variations of clocking frequency due to the change of the ambient temperature </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="clocked__time__stamp_8h_source.html">clocked_time_stamp.h</a></li>
<li>clocked_time_stamp.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 16 2012 12:42:43 for snark by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
