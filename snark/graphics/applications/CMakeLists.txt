SET( dir ${snark_SOURCE_CODE_BASE_DIR}/applications/ )

SET( view_points view-points )
SET( label_points label-points )

# This gets rid of an annoying conflict between windows macros and std::numeric_limits::max and min
IF(WIN32)
  ADD_DEFINITIONS(-DNOMINMAX)
ENDIF(WIN32)

QT4_ADD_RESOURCES( resources label-points.qrc )
QT4_WRAP_CPP( label_pointsMoc label_points/MainWindow.h label_points/Actions.h label_points/Viewer.h label_points/Tools.h label_points/IdEdit.h OPTIONS -DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED )
SOURCE_GROUP( "label_pointsQtAutoGenerated" FILES ${label_pointsMoc} )
FILE( GLOB source ${snark_SOURCE_CODE_BASE_DIR}/Applications/label_points/*.cpp ${snark_SOURCE_CODE_BASE_DIR}/Applications/view_points/VertexBuffer.cpp)
FILE( GLOB include ${snark_SOURCE_CODE_BASE_DIR}/Applications/label_points/*.h)
ADD_EXECUTABLE( ${label_points} label-points.cpp ${label_pointsMoc} ${resources} ${source} ${include} )
SOURCE_GROUP( "label-points" FILES label-points.cpp ${source} ${include} )
TARGET_LINK_LIBRARIES( ${label_points} snark_graphics_qt3d ${snark_ALL_LIBRARIES} ${Qt3D_LIB} ${OPENGL_LIBRARY} )

QT4_WRAP_CPP( view_pointsMoc view_points/MainWindow.h view_points/Viewer.h view_points/Action.h OPTIONS -DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED )
SOURCE_GROUP( "view_pointsQtAutoGenerated" FILES ${view_pointsMoc} )
FILE( GLOB source ${snark_SOURCE_CODE_BASE_DIR}/Applications/view_points/*.cpp )
FILE( GLOB include ${snark_SOURCE_CODE_BASE_DIR}/Applications/view_points/*.h )
SOURCE_GROUP( "view_points" FILES view-points.cpp ${source} ${include} )
ADD_EXECUTABLE( ${view_points} view-points.cpp  ${source} ${include} ${view_pointsMoc} )
TARGET_LINK_LIBRARIES( ${view_points} ${QT_LIBRARIES} ${Qt3D_LIB} snark_graphics_qt3d ${snark_ALL_LIBRARIES} ${OPENGL_LIBRARY} ) #profiler )

# it does not build on windows for a minuscule reason; fix, when we have time
IF( WIN32 )
    SOURCE_GROUP( "src" FILES view-points.cpp )
ELSE( WIN32 )
    QT4_WRAP_CPP( ViewSceneMoc ViewScene/MainWindow.h ViewScene/Scene.h OPTIONS -DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED )
    SOURCE_GROUP( "ViewSceneQtAutoGenerated" FILES ${ViewSceneMoc} )
    FILE( GLOB source ${snark_SOURCE_CODE_BASE_DIR}/Applications/ViewScene/*.cpp)
    FILE( GLOB include ${snark_SOURCE_CODE_BASE_DIR}/Applications/ViewScene/*.h)
ENDIF( WIN32 )

IF( WIN32 )
INSTALL( TARGETS ${view_points} ${label_points}
         RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/${snark_INSTALL_BIN_DIR}
         COMPONENT Runtime )
ELSE( WIN32 )
INSTALL( TARGETS ${view_points} ${label_points}
         RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/${snark_INSTALL_BIN_DIR}
         COMPONENT Runtime )
ENDIF( WIN32 )
                 
