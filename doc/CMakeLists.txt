PROJECT("doc")

SET_DIRECTORY_PROPERTIES(PROPERTIES EXCLUDE_FROM_ALL TRUE)

IF(CMAKE_COMPILER_IS_GNUCXX)
  IF(CMAKE_SYSTEM_NAME MATCHES Linux)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O1 -g1")
  ENDIF(CMAKE_SYSTEM_NAME MATCHES Linux)
ENDIF(CMAKE_COMPILER_IS_GNUCXX)

CONFIGURE_FILE(
  ${CMAKE_CURRENT_SOURCE_DIR}/Doxyfile.in
  ${CMAKE_CURRENT_BINARY_DIR}/Doxyfile
)

CONFIGURE_FILE(
  ${CMAKE_CURRENT_SOURCE_DIR}/doxy_header.html.in
  ${CMAKE_CURRENT_BINARY_DIR}/doxy_header.html
)

CONFIGURE_FILE(
  ${CMAKE_CURRENT_SOURCE_DIR}/doxy_footer.html.in
  ${CMAKE_CURRENT_BINARY_DIR}/doxy_footer.html
)

ADD_CUSTOM_TARGET(doc ALL
  COMMAND doxygen
  WORKING_DIRECTORY ${snark_BINARY_DIR}/doc)
